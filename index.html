<html>
	<head>
		<meta charset="utf-8" />
		
		<title>Test</title>

		<script src="https://raw.github.com/JacoRuit/steganos/master/steganos.js"></script>
		<script src="https://raw.github.com/JacoRuit/steganos/master/image.js"></script>

		<script>
		var image;
		function encode(){
			try {
				var text = document.getElementById("box").value;
				image.chunks.test = steganos.stringToBytes(text);
				image.write();
				var dataUri = image.getDataUri();
				document.getElementById("image").src = dataUri;
			}catch(err){
				alert(err);
			}
		}
		function decode(){
			try {
				image.read();
				alert(steganos.bytesToString(image.chunks.test));
			}catch(err){
				alert(err);
			}
		}
		function load(){
			var files = document.getElementById("imageSelect").files;
			if(files.length < 1){
				alert("No image selected");
				return;
			}
			try {
				var reader = new FileReader();
				reader.onload = function(event){
					var str = event.target.result.replace(steganos.DATA_URI_JPG_START, "");
					var bytes = steganos.base64ToBytes(str);
					image = new steganos.Image(bytes);
					image.allocChunk("test", []);
					document.getElementById("image").src = image.getDataUri();
				}
				reader.readAsDataURL(files[0]);
			}catch(err){
				alert(err);
			}
		}
		</script>
	</head>

	<body>
		<div>
			<header>
				<h1>steganos test</h1>
			</header>

			<input type="file" id="imageSelect" /> <br/> 
			<a onclick="load()">Load</a><br/>
			<input type="text" id="box" value="encrypted" /> <br />	


			<a onclick="encode()">Encode</a> <a onclick="decode()">Decode</a>
			<br/><br/>
			Image (right click to save): 
			<img id="image" />
			
			<footer>
				steganos Copyright (C) 2013 <a href="http://www.github.com/JacoRuit">Jaco Ruit</a>
				<br/>
				This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
				<br/>
				This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.
				<br/>
				You should have received a copy of the GNU General Public License along with this program. If not, see http://www.gnu.org/licenses/.
			</footer>
		</div>
	</body>
</html>
